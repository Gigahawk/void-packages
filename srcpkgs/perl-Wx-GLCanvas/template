# Template file for 'perl-Wx-GLCanvas'
pkgname=perl-Wx-GLCanvas
version=0.09
revision=1
wrksrc="Wx-GLCanvas-${version}"
build_style=perl-module
hostmakedepends="perl"
makedepends="perl-Wx wxWidgets-devel libfreeglut-devel"
depends="perl perl-Wx wxWidgets libfreeglut"
short_desc="Wx::GLCanvas - interface to wxWidgets' OpenGL canvas"
maintainer="Jasper Chan <jasperchan515@gmail.com>"
license="Artistic-1.0-Perl, GPL-1.0-or-later"
homepage="https://metacpan.org/release/Wx-GLCanvas"
distfiles="${CPAN_SITE}/Wx/${pkgname#perl-}-${version}.tar.gz"
checksum=6ad2c29ff06ff80a5c8b4b9d1d6bf0aed57489e831be59c94494f4f688dc8fe0

do_build() {
	: ${make_cmd:=make}

  # Original do_build() doesn't seem to support C++ compilation

	${make_cmd} CC="$CXX" LD="$CXX" CFLAGS="$CXXFLAGS" OPTIMIZE="$CXXFLAGS" \
		LDFLAGS="$LDFLAGS -L${XBPS_CROSS_BASE}/usr/lib -lperl" \
		LDDLFLAGS="-shared $CFLAGS -L${XBPS_CROSS_BASE}/usr/lib -lperl" \
		${makejobs} ${make_build_args} ${make_build_target}
}
